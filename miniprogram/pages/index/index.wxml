<view class="ai-page-container">
  <!-- 整个页面就是 AI 魔法生成面板 -->
  <view class="ai-panel-overlay" catchtouchmove="true">
    <view class="ai-panel" catchtap="noop">
      <view class="ai-panel-header">
        <view class="ai-title-row">
          <text class="ai-icon">✨</text>
          <text class="ai-title">AI 魔法生成</text>
        </view>
        <text class="ai-close" bindtap="onClosePage">✕</text>
      </view>

      <!-- 目的地：输入 + 热门城市按钮 -->
      <view class="ai-section">
        <text class="ai-section-label">目的地</text>
        <input
          class="ai-city-input"
          placeholder="输入城市或选择下方目的地"
          value="{{selectedCity}}"
          bindinput="onCityInput"
        />
        <view class="ai-chip-row">
          <view
            wx:for="{{hotDestinations}}"
            wx:key="*this"
            class="ai-chip {{item === selectedCity ? 'active' : ''}}"
            bindtap="onHotDestinationTap"
            data-city="{{item}}"
          >
            <text>{{item}}</text>
          </view>
        </view>
      </view>

      <!-- 游玩天数：步进器 -->
      <view class="ai-section">
        <text class="ai-section-label">游玩天数</text>
        <view class="ai-days-row">
          <view class="ai-day-btn" bindtap="changeDay" data-delta="-1">-</view>
          <view class="ai-day-display">{{days[dayIndex]}}</view>
          <view class="ai-day-btn" bindtap="changeDay" data-delta="1">+</view>
        </view>
      </view>

      <!-- 旅行偏好（可多选） -->
      <view class="ai-section">
        <text class="ai-section-label">旅行偏好（可多选）</text>
        <view class="ai-pref-grid">
          <view
            wx:for="{{aiPreferences}}"
            wx:key="id"
            class="ai-pref-card {{item.selected ? 'active' : ''}}"
            bindtap="togglePreference"
            data-id="{{item.id}}"
          >
            <text class="ai-pref-emoji">{{item.emoji}}</text>
            <text class="ai-pref-label">{{item.label}}</text>
          </view>
        </view>
      </view>

      <!-- 开始生成按钮 -->
      <view class="ai-panel-footer">
        <button
          class="ai-start-btn"
          bindtap="startAIGenerate"
          disabled="{{!selectedCity || !hasPrefSelected || loading}}"
        >
          ✨ 开始生成
        </button>
      </view>
    </view>
  </view>
</view>
