<!--pages/profile/profile.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="avatar-wrapper">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/3s.jpg'}}" mode="aspectFill"></image>
    </view>
    <view class="user-info">
      <text class="nickname">{{userInfo.nickName || 'æ—…è¡Œè€…'}}</text>
      <text class="user-stats">å·²åˆ›å»º {{stats.tripCount}} ä»½è·¯ä¹¦</text>
    </view>
  </view>

  <!-- æ•°æ®ç»Ÿè®¡ -->
  <view class="stats-card">
    <view class="stat-item">
      <text class="stat-value">{{stats.tripCount}}</text>
      <text class="stat-label">è·¯ä¹¦</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">{{stats.poiCount}}</text>
      <text class="stat-label">åœ°ç‚¹</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">{{stats.cityCount}}</text>
      <text class="stat-label">åŸå¸‚</text>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="section-title">å¸¸ç”¨åŠŸèƒ½</view>
    
    <view class="menu-card">
      <view class="menu-item" bindtap="goToFavorites">
        <text class="menu-icon">â­</text>
        <text class="menu-text">æˆ‘çš„æ”¶è—</text>
        <text class="menu-count">{{favorites.length}}</text>
        <text class="menu-arrow">â†’</text>
      </view>
      
      <view class="menu-item" bindtap="goToHistory">
        <text class="menu-icon">ğŸ•</text>
        <text class="menu-text">æµè§ˆå†å²</text>
        <text class="menu-arrow">â†’</text>
      </view>
      
      <view class="menu-item" bindtap="goToDownloads">
        <text class="menu-icon">ğŸ“¥</text>
        <text class="menu-text">ç¦»çº¿è·¯ä¹¦</text>
        <text class="menu-arrow">â†’</text>
      </view>
    </view>
  </view>

  <!-- åå¥½è®¾ç½® -->
  <view class="menu-section">
    <view class="section-title">åå¥½è®¾ç½®</view>
    
    <view class="menu-card">
      <view class="menu-item" bindtap="setDefaultCity">
        <text class="menu-icon">ğŸ </text>
        <text class="menu-text">é»˜è®¤å‡ºå‘åœ°</text>
        <text class="menu-value">{{settings.defaultCity || 'æœªè®¾ç½®'}}</text>
        <text class="menu-arrow">â†’</text>
      </view>
      
      <view class="menu-item" bindtap="setMapApp">
        <text class="menu-icon">ğŸ—ºï¸</text>
        <text class="menu-text">åœ°å›¾åå¥½</text>
        <text class="menu-value">{{settings.mapApp || 'å¾®ä¿¡åœ°å›¾'}}</text>
        <text class="menu-arrow">â†’</text>
      </view>
      
      <view class="menu-item">
        <text class="menu-icon">ğŸŒ™</text>
        <text class="menu-text">æ·±è‰²æ¨¡å¼</text>
        <switch checked="{{settings.darkMode}}" bindchange="toggleDarkMode" color="#a18cd1"></switch>
      </view>
    </view>
  </view>

  <!-- å…¶ä»– -->
  <view class="menu-section">
    <view class="menu-card">
      <view class="menu-item" bindtap="goToFeedback">
        <text class="menu-icon">ğŸ’¬</text>
        <text class="menu-text">æ„è§åé¦ˆ</text>
        <text class="menu-arrow">â†’</text>
      </view>
      
      <view class="menu-item" bindtap="goToAbout">
        <text class="menu-icon">â„¹ï¸</text>
        <text class="menu-text">å…³äºæˆ‘ä»¬</text>
        <text class="menu-arrow">â†’</text>
      </view>
      
      <button class="menu-item share-btn" open-type="share">
        <text class="menu-icon">ğŸ“¤</text>
        <text class="menu-text">åˆ†äº«ç»™æœ‹å‹</text>
        <text class="menu-arrow">â†’</text>
      </button>
    </view>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info">
    <text>è·¯ä¹¦ v1.0.0</text>
  </view>
</view>

