
<!--
  Block Renderer - 分发器组件
  根据 block.type 决定渲染什么子视图
-->
<view class="block-wrapper" data-block-id="{{block.id}}">
  <!-- Day Divider Block -->
  <day-divider-block
    wx:if="{{block.type === 'day-divider'}}"
    block="{{block}}"
  />

  <!-- POI Block -->
  <poi-block
    wx:elif="{{block.type === 'poi'}}"
    block="{{block}}"
    editMode="{{editMode}}"
    bind:navigate="onNavigate"
    bind:delete="onDelete"
    bind:edit="onEdit"
    bind:update="onUpdate"
  />

  <!-- Text Block -->
  <text-block
    wx:elif="{{block.type === 'text'}}"
    block="{{block}}"
    editMode="{{editMode}}"
    bind:change="onTextChange"
    bind:delete="onDelete"
    bind:update="onUpdate"
  />

  <!-- Transport Block (结构化展示：方式 · 时长 + 起点 → 终点) -->
  <view wx:elif="{{block.type === 'transport'}}" class="transport-block">
    <view class="transport-info">
      <text class="transport-main">{{block.content.mode || '交通'}}<text wx:if="{{block.content.duration}}"> · {{block.content.duration}}分钟</text></text>
      <text class="transport-route" wx:if="{{block.content.from || block.content.to}}">{{block.content.from || '出发地'}} → {{block.content.to || '目的地'}}</text>
    </view>
  </view>

  <!-- Image Block -->
  <image-block
    wx:elif="{{block.type === 'image'}}"
    block="{{block}}"
    editMode="{{editMode}}"
    bind:update="onUpdate"
    bind:delete="onDelete"
  />

  <!-- Checklist Block -->
  <checklist-block
    wx:elif="{{block.type === 'checklist'}}"
    block="{{block}}"
    editMode="{{editMode}}"
    bind:update="onUpdate"
  />

  <!-- Unknown Block Type -->
  <view wx:else class="unknown-block">
    <text>未知块类型: {{block.type}}</text>
  </view>
</view>

