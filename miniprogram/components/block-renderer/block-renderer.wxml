<!--
  Block Renderer - åˆ†å‘å™¨ç»„ä»¶
  æ ¹æ® block.type å†³å®šæ¸²æŸ“ä»€ä¹ˆå­è§†å›¾
-->
<view class="block-wrapper" data-block-id="{{block.id}}">
  <!-- Day Divider Block -->
  <day-divider-block 
    wx:if="{{block.type === 'day-divider'}}"
    block="{{block}}"
  />

  <!-- POI Block -->
  <poi-block
    wx:elif="{{block.type === 'poi'}}"
    block="{{block}}"
    editMode="{{editMode}}"
    bind:navigate="onNavigate"
    bind:delete="onDelete"
    bind:edit="onEdit"
    bind:update="onUpdate"
  />

  <!-- Text Block -->
  <text-block
    wx:elif="{{block.type === 'text'}}"
    block="{{block}}"
    editMode="{{editMode}}"
    bind:change="onTextChange"
    bind:delete="onDelete"
    bind:update="onUpdate"
  />

  <!-- Transport Block (æš‚ç”¨ç®€å•æ ·å¼) -->
  <view wx:elif="{{block.type === 'transport'}}" class="transport-block">
    <view class="transport-icon">
      <text wx:if="{{block.content.mode === 'taxi'}}">ğŸš•</text>
      <text wx:elif="{{block.content.mode === 'subway'}}">ğŸš‡</text>
      <text wx:elif="{{block.content.mode === 'walk'}}">ğŸš¶</text>
      <text wx:elif="{{block.content.mode === 'bus'}}">ğŸšŒ</text>
      <text wx:else>ğŸš—</text>
    </view>
    <view class="transport-info">
      <text class="transport-instruction">{{block.content.instruction || 'å‰å¾€ä¸‹ä¸€åœ°ç‚¹'}}</text>
      <text class="transport-duration" wx:if="{{block.content.duration}}">çº¦{{block.content.duration}}åˆ†é’Ÿ</text>
    </view>
  </view>

  <!-- Image Block (æš‚ç”¨ç®€å•æ ·å¼) -->
  <view wx:elif="{{block.type === 'image'}}" class="image-block">
    <image 
      class="block-image" 
      src="{{block.content.url}}" 
      mode="widthFix"
      lazy-load
    />
    <text class="image-caption" wx:if="{{block.content.caption}}">{{block.content.caption}}</text>
  </view>

  <!-- Unknown Block Type -->
  <view wx:else class="unknown-block">
    <text>æœªçŸ¥å—ç±»å‹: {{block.type}}</text>
  </view>
</view>

