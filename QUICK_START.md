# 快速开始指南

## 5 分钟快速部署

### 步骤 1：打开项目（30 秒）

1. 使用微信开发者工具打开本项目
2. 确保已登录微信开发者账号

### 步骤 2：开通云开发（1 分钟）

1. 点击工具栏的"云开发"按钮
2. 如果未开通，按提示开通云开发服务
3. 创建一个云开发环境（或使用已有环境）

### 步骤 3：创建数据库（1 分钟）

1. 在云开发控制台，点击"数据库"
2. 点击"添加集合"，输入集合名：`activities`
3. 点击"确定"

### 步骤 4：导入数据（1 分钟）

**重要：必须使用 JSON Lines 格式文件！**

1. 在 `activities` 集合页面，点击"导入"
2. 选择项目根目录的 **`sample_activities_jsonl.json`** 文件（不是 sample_activities.json）
3. 点击"确定"导入
4. 确认导入成功（应该有 24 条数据）

**注意**：微信云数据库要求 JSON Lines 格式（每行一个 JSON 对象），不支持标准 JSON 数组格式。

### 步骤 5：上传云函数（1 分钟）

1. 在微信开发者工具左侧文件树中
2. 右键点击 `cloudfunctions/generateCard` 文件夹
3. 选择"上传并部署：云端安装依赖"
4. 等待上传完成（看到"上传成功"提示）

### 步骤 6：运行测试（30 秒）

1. 点击"编译"按钮
2. 在模拟器中测试：
   - 选择"上海"
   - 选择"2 天"
   - 选择"亲子遛娃"
   - 点击"3 秒出卡"
3. 等待生成结果

## 预期结果

✅ 成功：

- 显示"正在为您生成..."加载提示
- 3 秒内返回结果
- 显示生成的行程内容（当前为文本格式）
- 可以点击"保存到相册"和"分享给好友"

❌ 如果失败：

1. 检查云函数是否上传成功
2. 检查数据库数据是否导入成功
3. 查看控制台错误信息
4. 查看云函数日志（云开发控制台 -> 云函数 -> 日志）

## 下一步

当前版本生成的是文本文件，要实现真正的图片生成，请参考：

- `IMAGE_GENERATION_GUIDE.md` - 图片生成实现指南

## 常见问题

### Q1: 云函数调用失败？

**A**: 检查云函数是否已成功上传，可以在云开发控制台的"云函数"页面查看。

### Q2: 提示"暂无相关活动数据"？

**A**: 检查数据库中的数据，确保：

- 集合名为 `activities`
- 数据中的 `city` 字段与选择的城市一致
- 数据中的 `tags` 字段包含选择的出行目的

### Q3: 生成的不是图片？

**A**: 当前版本生成的是文本文件（MVP 阶段），图片生成功能需要进一步开发。

### Q4: 如何添加更多城市？

**A**:

1. 在 `pages/index/index.js` 的 `data.cities` 中添加城市名
2. 在数据库中添加对应城市的活动数据

### Q5: 如何修改出行目的标签？

**A**:

1. 在 `pages/index/index.js` 的 `data.intents` 中修改
2. 确保数据库中的活动数据包含对应的 tags

## 技术支持

遇到问题？查看以下文档：

- `README.md` - 项目概述
- `DEPLOYMENT.md` - 详细部署指南
- `PROJECT_SUMMARY.md` - 项目总结
- `database_setup.md` - 数据库设置详解

## 项目结构速览

```
miniprogram-1/
├── miniprogram/
│   ├── pages/index/          # 主页面
│   ├── app.js                # 小程序入口
│   └── app.json              # 小程序配置
├── cloudfunctions/
│   └── generateCard/         # 核心云函数
├── sample_activities.json    # 示例数据（24条）
├── QUICK_START.md           # 本文件
├── DEPLOYMENT.md            # 详细部署指南
└── README.md                # 项目说明
```

## 开始使用

现在你已经完成了基础部署，可以：

1. 测试不同的城市、天数、目的组合
2. 查看生成的行程是否合理
3. 尝试添加更多活动数据
4. 开始实现图片生成功能

祝你使用愉快！🎉
